<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOJA DE RUTA RRHH-<span id="title-añoVersion">2025-II</span></title>
    <style>
        @media print {
            body { margin: 0; background: white; }
            .no-print { display: none; }
            .container { 
                box-shadow: none; 
                padding: 8px; 
                margin: 0;
                max-width: none;
                min-height: auto;
            }
            .form-group input, .form-group textarea, .form-group select {
                border: 1px solid #000;
            }
            
            /* Campos vacíos sin placeholder en impresión */
            input[type="text"]:not(:placeholder-shown),
            textarea:not(:placeholder-shown) {
                border: 1px solid #000;
            }
            
            input[value], textarea[value] {
                border: 1px solid #000;
            }
            
            /* Firma y sello con borde ligero para impresión */
            .firma-sello {
                border: 1px solid #666;
                background: transparent;
            }
            
            /* Campos vacíos sin borde en impresión */
            input:not([value]):not(:focus):not(:checked) {
                border: none;
                background: transparent;
            }
            
            textarea:not([value]):not(:focus) {
                border: none;
                background: transparent;
            }
            
            /* Ocultar controles/botones en impresión */
            .controls {
                display: none;
            }
            
            /* Reducir espaciado para optimizar página carta */
            .form-row { margin-bottom: 4px; }
            .form-group { margin-bottom: 4px; }
            .form-group label { margin-bottom: 1px; }
            .header { margin-bottom: 8px; padding-bottom: 6px; }
            .membrete { margin-bottom: 6px; padding: 4px; }
            .slogan { padding: 4px; margin: 10px -8px 0 -8px; }
            .destino-section { padding: 8px; margin-bottom: 6px; }
            .inst-comp { padding: 6px; margin-bottom: 6px; }
            .fechas-section { margin-top: 6px; gap: 6px; }
            .firma-sello { height: 25px; }
        }
        
        @page {
            size: letter;
            margin: 0.5in;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            margin: 10px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 8.5in;
            margin: 0 auto;
            background: white;
            padding: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 11in;
        }
        
        .header {
            text-align: center;
            border-bottom: 1px solid #2c3e50;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        
        .membrete {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            padding: 5px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
        
        .escudo {
            width: 50px;
            height: auto;
            margin-right: 8px;
            object-fit: contain;
        }
        
        .membrete-texto {
            text-align: left;
        }
        
        .membrete-texto .gobierno {
            font-size: 10px;
            color: #666;
            font-weight: normal;
            margin: 0;
        }
        
        .membrete-texto .municipio {
            font-size: 12px;
            color: #2c3e50;
            font-weight: bold;
            margin: 2px 0;
        }
        
        .slogan {
            text-align: center;
            background: #2c3e50;
            color: white;
            padding: 4px;
            margin: 12px -15px 0 -15px;
            font-size: 10px;
            font-weight: bold;
            letter-spacing: 0.5px;
        }
        
        .header h1 {
            margin: 3px 0 0 0;
            color: #2c3e50;
            font-size: 16px;
            font-weight: bold;
        }
        
        .form-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            flex-wrap: wrap;
        }
        
        .form-group {
            margin-bottom: 6px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 2px;
            font-weight: bold;
            color: #34495e;
            font-size: 12px;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 4px;
            border: 1px solid #bdc3c7;
            border-radius: 2px;
            font-size: 12px;
        }
        
        .form-group textarea {
            min-height: 40px;
            resize: vertical;
        }
        
        .destino-section {
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 10px;
        }
        
        .destino-section h3 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 12px;
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 4px;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 4px;
            margin-bottom: 8px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin-right: 4px;
            transform: scale(0.9);
        }
        
        .checkbox-item label {
            margin-bottom: 0;
            font-weight: normal;
            cursor: pointer;
            font-size: 11px;
        }
        
        .inst-comp {
            background: #ecf0f1;
            padding: 8px;
            border-radius: 3px;
            margin-bottom: 8px;
        }
        
        .fechas-section {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }
        
        .fecha-group {
            text-align: center;
        }
        
        .fecha-group input {
            text-align: center;
        }
        
        .fechas-section h4 {
            margin: 0 0 4px 0;
            color: #2c3e50;
            font-size: 10px;
        }
        
        .firma-sello {
            border: 1px solid transparent;
            height: 35px;
            background: transparent;
            border-radius: 2px;
        }
        
        .controls {
            text-align: center;
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #ecf0f1;
        }
        
        .btn {
            padding: 6px 12px;
            margin: 0 5px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        
        .btn-success {
            background-color: #27ae60;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #229954;
        }
        
        .form-info {
            font-size: 10px;
            color: #7f8c8d;
            margin-bottom: 10px;
            padding: 6px;
            background: #f8f9fa;
            border-radius: 3px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .fechas-section {
                grid-template-columns: 1fr;
            }
            
            .checkbox-group {
                grid-template-columns: 1fr;
            }
            
            .membrete {
                flex-direction: column;
                text-align: center;
            }
            
            .escudo {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .membrete-texto {
                text-align: center;
            }
            
            body {
                margin: 10px;
            }
            
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="membrete">
                <img src="escudo_challapata_2025.png" alt="Escudo de Challapata" class="escudo">
                <div class="membrete-texto">
                    <p class="gobierno">GOBIERNO AUTÓNOMO MUNICIPAL DE</p>
                    <p class="municipio">CHALLAPATA</p>
                </div>
            </div>
            <h1>HOJA DE RUTA RRHH-<input type="text" id="añoVersion" name="añoVersion" value="2025-II" style="border: none; background: transparent; border-bottom: 1px solid #2c3e50; font-size: inherit; font-weight: bold; width: 80px; text-align: center;"></h1>
            
            <div class="form-info" style="text-align: center; margin: 8px 0;">
                <label for="folio" style="font-weight: bold; color: #2c3e50;">Nº de Folio:</label>
                <input type="text" id="folio" name="folio" placeholder="001" style="border: none; border-bottom: 1px solid #2c3e50; width: 60px; text-align: center; font-weight: bold;">
            </div>
        </div>
        
        <div class="form-info">
            <strong>Formulario Digital:</strong> Este formulario puede completarse digitalmente o imprimirse para llenado manual. 
            Utilice los campos interactivos para ingresar la información requerida.
        </div>
        
        <form id="hojaRutaForm">
            <div class="form-row">
                <div class="form-group" style="flex: 1; margin-right: 20px;">
                    <label for="procedimiento">Procedimiento:</label>
                    <input type="text" id="procedimiento" name="procedimiento">
                </div>
                <div class="form-group" style="flex: 1;">
                    <label for="fechaIngreso">Fecha de Ingreso:</label>
                    <div style="display: flex; gap: 5px;">
                        <input type="number" id="dia" min="1" max="31" style="width: 60px;">
                        <span style="line-height: 30px;">/</span>
                        <input type="number" id="mes" min="1" max="12" style="width: 60px;">
                        <span style="line-height: 30px;">/</span>
                        <input type="number" id="año" min="2020" max="2030" style="width: 80px;">
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="referencia">Referencia:</label>
                <input type="text" id="referencia" name="referencia">
            </div>
            
            <div class="destino-section">
                <h3>ACCIÓN SOLICITADA</h3>
                <div class="form-group">
                    <label for="accion">Seleccionar Acción:</label>
                    <select id="accion" name="accion" style="width: 100%; padding: 6px; border: 1px solid #bdc3c7; border-radius: 3px; font-size: 13px;">
                        <option value="">Seleccione una acción...</option>
                        <option value="Urgente">Urgente</option>
                        <option value="Informe en el día">Informe en el día</option>
                        <option value="Página antecedentes">Página antecedentes</option>
                        <option value="Instruya su ejecución">Instruya su ejecución</option>
                        <option value="Archive">Archive</option>
                        <option value="Conteste carta">Conteste carta</option>
                        <option value="Verificar y procesar">Verificar y procesar</option>
                        <option value="Efectúe liquidación">Efectúe liquidación</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group" style="flex: 1; margin-right: 20px;">
                    <label for="de">De:</label>
                    <select id="de" name="de" style="width: 100%; padding: 6px; border: 1px solid #bdc3c7; border-radius: 3px; font-size: 13px;">
                        <option value="">Seleccione origen...</option>
                        <option value="Alcalde">Alcalde</option>
                        <option value="Coordinador Municipal">Coordinador Municipal</option>
                        <option value="Secretario Municipal Administrativo y Financiero">Secretario Municipal Administrativo y Financiero</option>
                        <option value="Secretario Municipal de Obras Públicas">Secretario Municipal de Obras Públicas</option>
                        <option value="Secretario Municipal de Desarrollo Humano">Secretario Municipal de Desarrollo Humano</option>
                        <option value="Secretario Municipal Productiva y Medio Ambiente">Secretario Municipal Productiva y Medio Ambiente</option>
                        <option value="Director Jurídico">Director Jurídico</option>
                        <option value="Director Administrativo">Director Administrativo</option>
                        <option value="Director de Recursos Humanos">Director de Recursos Humanos</option>
                        <option value="Sub Alcalde de Challapata">Sub Alcalde de Challapata</option>
                        <option value="Sub Alcaldia de Aguas Calientes">Sub Alcaldia de Aguas Calientes</option>
                        <option value="Sub Alcaldia de Norte Condo">Sub Alcaldia de Norte Condo</option>
                        <option value="Sub Alcaldia de Norte Condo Abajo">Sub Alcaldia de Norte Condo Abajo</option>
                        <option value="Sub Alcaldia de Culta">Sub Alcaldia de Culta</option>
                        <option value="Sub Alcaldia de Huancane">Sub Alcaldia de Huancane</option>
                        <option value="Sub Alcaldia de Tolapalca">Sub Alcaldia de Tolapalca</option>
                        <option value="Sub Alcaldia de Ancacato">Sub Alcaldia de Ancacato</option>
                    </select>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label for="para">Para:</label>
                    <select id="para" name="para" style="width: 100%; padding: 6px; border: 1px solid #bdc3c7; border-radius: 3px; font-size: 13px;">
                        <option value="">Seleccione destino...</option>
                        <option value="Alcalde">Alcalde</option>
                        <option value="Coordinador Municipal">Coordinador Municipal</option>
                        <option value="Secretario Municipal Administrativo y Financiero">Secretario Municipal Administrativo y Financiero</option>
                        <option value="Secretario Municipal de Obras Públicas">Secretario Municipal de Obras Públicas</option>
                        <option value="Secretario Municipal de Desarrollo Humano">Secretario Municipal de Desarrollo Humano</option>
                        <option value="Secretario Municipal Productiva y Medio Ambiente">Secretario Municipal Productiva y Medio Ambiente</option>
                        <option value="Director Jurídico">Director Jurídico</option>
                        <option value="Director Administrativo">Director Administrativo</option>
                        <option value="Director de Recursos Humanos">Director de Recursos Humanos</option>
                        <option value="Sub Alcalde de Challapata">Sub Alcalde de Challapata</option>
                        <option value="Sub Alcaldia de Aguas Calientes">Sub Alcaldia de Aguas Calientes</option>
                        <option value="Sub Alcaldia de Norte Condo">Sub Alcaldia de Norte Condo</option>
                        <option value="Sub Alcaldia de Norte Condo Abajo">Sub Alcaldia de Norte Condo Abajo</option>
                        <option value="Sub Alcaldia de Culta">Sub Alcaldia de Culta</option>
                        <option value="Sub Alcaldia de Huancane">Sub Alcaldia de Huancane</option>
                        <option value="Sub Alcaldia de Tolapalca">Sub Alcaldia de Tolapalca</option>
                        <option value="Sub Alcaldia de Ancacato">Sub Alcaldia de Ancacato</option>
                    </select>
                </div>
            </div>
            
            <div class="inst-comp">
                <h4 style="margin-top: 0; color: #2c3e50; font-size: 11px;">Instrucciones Complementarias:</h4>
                <div class="form-group">
                    <textarea id="instrucciones1" name="instrucciones1"></textarea>
                </div>
            </div>
            
            <div class="fechas-section">
                <div class="fecha-group">
                    <h4>ENTRADA</h4>
                    <div style="display: flex; gap: 3px; justify-content: center;">
                        <input type="number" placeholder="DD" min="1" max="31" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="MM" min="1" max="12" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="2025" min="2020" max="2030" style="width: 70px;">
                    </div>
                </div>
                <div class="fecha-group">
                    <h4>SALIDA</h4>
                    <div style="display: flex; gap: 3px; justify-content: center;">
                        <input type="number" placeholder="DD" min="1" max="31" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="MM" min="1" max="12" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="2025" min="2020" max="2030" style="width: 70px;">
                    </div>
                </div>
                <div class="fecha-group">
                    <div class="firma-sello"></div>
                    <h4>FIRMA Y SELLO</h4>
                </div>
            </div>
            
            <div class="form-group" style="margin-top: 25px;">
                <label for="para">Para:</label>
                <input type="text" id="para" name="para">
            </div>
            
            <div class="inst-comp">
                <h4 style="margin-top: 0; color: #2c3e50; font-size: 11px;">Instrucciones Complementarias:</h4>
                <div class="form-group">
                    <textarea id="instrucciones2" name="instrucciones2"></textarea>
                </div>
            </div>
            
            <div class="fechas-section">
                <div class="fecha-group">
                    <h4>ENTRADA</h4>
                    <div style="display: flex; gap: 3px; justify-content: center;">
                        <input type="number" placeholder="DD" min="1" max="31" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="MM" min="1" max="12" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="2025" min="2020" max="2030" style="width: 70px;">
                    </div>
                </div>
                <div class="fecha-group">
                    <h4>SALIDA</h4>
                    <div style="display: flex; gap: 3px; justify-content: center;">
                        <input type="number" placeholder="DD" min="1" max="31" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="MM" min="1" max="12" style="width: 50px;">
                        <span>/</span>
                        <input type="number" placeholder="2025" min="2020" max="2030" style="width: 70px;">
                    </div>
                </div>
                <div class="fecha-group">
                    <div class="firma-sello"></div>
                    <h4>FIRMA Y SELLO</h4>
                </div>
            </div>
            
            <div class="controls">
                <button type="button" class="btn btn-secondary" onclick="limpiarFormulario()">Limpiar Formulario</button>
                <button type="button" class="btn btn-primary" onclick="guardarLocal()">Guardar (Local)</button>
                <button type="button" class="btn btn-success" onclick="imprimirFormulario()">Imprimir</button>
            </div>
        </form>
        
        <div class="slogan">
            Por un municipio Saludable, Fuerte y con Mente Productiva<br>
            <strong>Gobierno Autónomo Municipal de Challapata</strong>
        </div>
    </div>

    <script>
        function limpiarFormulario() {
            if (confirm('¿Está seguro de que desea limpiar todos los campos?')) {
                document.getElementById('hojaRutaForm').reset();
            }
        }
        
        function guardarLocal() {
            const formData = new FormData(document.getElementById('hojaRutaForm'));
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }
            
            localStorage.setItem('hojaRutaRRHH', JSON.stringify(data));
            alert('Datos guardados localmente. Puede cerrar y abrir el navegador para recuperar la información.');
        }
        
        function imprimirFormulario() {
            window.print();
        }
        
        function cargarDatos() {
            const datos = localStorage.getItem('hojaRutaRRHH');
            if (datos) {
                try {
                    const data = JSON.parse(datos);
                    for (let key in data) {
                        const elemento = document.querySelector(`[name="${key}"]`);
                        if (elemento) {
                            if (elemento.type === 'checkbox') {
                                if (Array.isArray(data[key])) {
                                    data[key].forEach(valor => {
                                        const checkbox = document.querySelector(`[value="${valor}"]`);
                                        if (checkbox) checkbox.checked = true;
                                    });
                                } else {
                                    const checkbox = document.querySelector(`[value="${data[key]}"]`);
                                    if (checkbox) checkbox.checked = true;
                                }
                            } else {
                                elemento.value = data[key];
                            }
                        }
                    }
                } catch (e) {
                    console.error('Error al cargar datos:', e);
                }
            }
        }
        
        // Cargar datos al cargar la página
        window.addEventListener('load', function() {
            cargarDatos();
            
            // Sincronizar título de página con año/versión
            const añoVersionInput = document.getElementById('añoVersion');
            const titleSpan = document.getElementById('title-añoVersion');
            
            if (añoVersionInput && titleSpan) {
                añoVersionInput.addEventListener('input', function() {
                    titleSpan.textContent = this.value;
                });
                
                // Establecer valor inicial
                titleSpan.textContent = añoVersionInput.value;
            }
        });
        
        // Función para exportar datos
        function exportarDatos() {
            const formData = new FormData(document.getElementById('hojaRutaForm'));
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'hoja_ruta_rrhh_' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
